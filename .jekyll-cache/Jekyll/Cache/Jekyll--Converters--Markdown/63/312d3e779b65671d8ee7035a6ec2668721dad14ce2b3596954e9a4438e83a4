I"z<p>Update: iframeçˆ¶å­ä¼ å€¼çš„é—®é¢˜</p>

<hr />

<p>å…¬å¸éœ€æ±‚åšä¸€ä¸ªå·¦å³åˆ†æ çš„é¡µé¢ï¼Œå› ä¸ºé¡¹ç›®æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å·¦ä¾§é¡µé¢éœ€è¦ç”¨iframeé“¾æ¥å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨çš„åœ°å€ï¼Œå› è€Œæœ¬æ¬¡è®°å½•ä¸€ä¸‹ä½¿ç”¨è¿‡ç¨‹ä¸­çš„é—®é¢˜</p>

<h2 id="è·¨åŸŸ">è·¨åŸŸ</h2>

<p>Â  ä¸¤ä¸ªé¡¹ç›®æ˜¯æŒ‚åœ¨ä¸¤ä¸ªæœåŠ¡å™¨ä¸Šçš„ï¼Œæ‰€ä»¥çˆ¶å­ç»„ä»¶ä¸èƒ½ç”¨domç›´æ¥æ‹¿ï¼Œ</p>

<p>Â  æ‰€ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ä¸¤ä¸ªæ–¹æ³•</p>
<h5 id="å­é¡µé¢">å­é¡µé¢</h5>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>  <span class="kd">function</span> <span class="nx">receiveMessage</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="dl">"</span><span class="s2">æˆåŠŸè·å–ç›´æ’­èµ„æº</span><span class="dl">"</span><span class="p">,</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">origin</span><span class="p">);</span>

  <span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="nx">receiveMessage</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h5 id="çˆ¶é¡µé¢">çˆ¶é¡µé¢</h5>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>  <span class="kd">var</span> <span class="nx">iframe</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#id</span><span class="dl">'</span><span class="p">).</span><span class="nx">contentWindow</span>

  <span class="nx">iframe</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span>

  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">999</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span>

  <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>2.å±€éƒ¨åˆ·æ–°</p>

<p>æœ‰éœ€æ±‚æ˜¯éœ€è¦åªè®©iframeåˆ·æ–°è·å¾—æ•°æ®ï¼Œè€Œçˆ¶é¡µé¢ä¸åˆ·æ–°</p>

<p>1.åŒåŸŸ</p>

<p>document.getElementById(â€˜idâ€™).contentWindow.location.reload(true);</p>

<p>2.è·¨åŸŸ</p>

<p>è¿™å—çš„è¯å¦‚æœsrcä¸å˜ï¼Œæˆ‘æ¨èçš„æ–¹æ³•æ˜¯ç”¨postmessageæ¥ä¼ æ•°æ®ã€‚</p>

<h3 id="æ³¨å¾ˆå¤šåšä¸»ç–¯ç‹‚è½¬è½½çš„documentframeså·²ç»æ²¡äº†">æ³¨ï¼šå¾ˆå¤šåšä¸»ç–¯ç‹‚è½¬è½½çš„document.frameså·²ç»æ²¡äº†ã€‚</h3>
:ET